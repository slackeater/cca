{% extends "dashboard/tknDash.html" %}

{% block js %}

<script type="text/javascript">

function formTimeline(){
	$("#wait2").fadeIn("slow")
	Dajaxice.timeliner.formTimeliner(formTimeCallBack,{'tokenID':tVal(),'cloudItem':iVal(),'form':$("#timeForm").serialize(true)})
}

function formTimeCallBack(data){
	Dajax.process(data)
	$("#wait2").fadeOut("slow")
	$("#visualization").fadeIn("slow")
}

</script>

{% endblock %}

{% block content %}

<div class="page-header">
	<h1>Timeline</h1>
</div>

<ol class="breadcrumb">
	<li><a href="/clouditem/">Cloud Item</a></li>
	<li><a href="/clouditem/{{objID}}/">Cloud Item {{objID}}</a></li>
	<li><a href="/token/{{objID}}/">Access Tokens</a></li>
	<li><a href="/token/{{objID}}/{{tokenID}}/">Access Token {{tokenID}}</a></li>
	<li class="active">Timeline</li>
</ol>

<p>Generate a timeline with the documents of this account.</p>

<div class="container-fluid">
	<form method="post" action="" id="timeForm">
		{% csrf_token %}
		<table style="width: 50%">
			<tr><td><label for="id_resType">{{ form.resType.label }}</label></td><td colspan=4>{{ form.resType }}</td></tr>
			<tr><td colspan=5>&nbsp;</td></tr>
			<tr><td><label for="id_mimeType">{{ form.mimeType.label }}</label></td><td colspan=4>{{ form.mimeType }}</td></tr>
			<tr><td colspan=5>&nbsp;</td></tr>
			<tr>
				<td></td>
				<td><label for="id_startDate">{{ form.startDate.label }}</label></td><td>{{ form.startDate }}</td>
				<td><label for="id_endDate">&nbsp;{{ form.endDate.label }}</label></td><td>{{ form.endDate }}</td>
			</tr>
			<tr><td></td><td><input type="button" value="Generate" onclick="formTimeline()" class="btn btn-default"/></td><td colspan=3><img id="wait2" class="waiters" style="display: none" src="/static/47.GIF" /></td></tr>
		</table>
	</form>

	<div id="formHistoryError"></div>
	<div id="fileHistory"></div>
	<div id="formHistory"></div>
</div>


{% endblock %}

