{% extends "dashboard/dash.html" %}

{% block js %}
<script type="text/javascript">

function dropboxAuthCode(){
	$("#loadDrop").fadeIn("slow")
	Dajaxice.dashboard.submitDropboxCode(dropCallBack, {'code':$('#dropCode').val(),'impID':vars['i']})
}

function dropCallBack(data){
	$("#loadDrop").fadeOut("slow")
	Dajax.process(data)
}

function googleAuthCode(){
	$("#loadGoogle").fadeIn("slow")
	Dajaxice.dashboard.submitGoogleCode(googleCallBack, {'code':$('#gCode').val(),'impID':vars['i']})
}

function googleCallBack(data){
	$("#loadGoogle").fadeOut("slow")
	Dajax.process(data)
}
</script>

{% endblock %}

{% block rightcont %}

<h2 onclick="toggleHide('credTab')">Credentials</h2>
<table id="credTab">
	<tr><td><b>Hostname</b></td><td><b>Username</b></td><td><b>Password</b></td></tr>
	{% for b in browsers %}
		{% for p in b.profiles %}
			{% for cred in p.credentialList %}
			<tr><td>{{ cred.hostname }}</td><td>{{ cred.username }}</td><td>{{ cred.password }}</td></tr>
			{% endfor %}
		{% endfor %}
	{% endfor %}
</table>

<h2>Dropbox</h2>
<ol>
	<li>First login with <a target="_blank" href="{{ dropAuthurl }}">Dropbox</a></li>
	<li>Copy the authorization code below and submit to obtain an access token

		<form method="post">
			{% csrf_token %}
			<label>Authorization Code</label>
			<input type="text" name="dropboxCode" id="dropCode" />
			<input type="button" name="sub" onclick="dropboxAuthCode()" value="Submit" />
		</form>
	</li>
</ol>

<div id="dStat"></div>
<div id="dropTokenTable">
	<img src="/static/468.GIF" style="display: none" id="loadDrop" />	
{{ dTab }}
</div>

<h2>Google Drive</h2>
<ol>
	<li>First login with <a target="_blank" href="{{gdriveAuthurl}}">Google Drive</a></li>
	<li>Copy the authorization code below and submit to obtain an access token

		<form method="post">
			{% csrf_token %}
			<label>Authorization Code</label>
			<input type="text" name="googleCode" id="gCode" />
			<input type="button" name="sub" onclick="googleAuthCode()" value="Submit" />
		</form>
	</li>
</ol>

<div id="gStat"></div>
<div id="googleTokenTable">
	<img src="/static/468.GIF" style="display: none" id="loadGoogle" />	
	{{ gTab }}
</div>

<h2>Microsoft OneDrive</h2>

{% endblock %}
